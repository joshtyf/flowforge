# Flowforge Backend Architecture

The Flowforge backend is a Go application that uses a Postgres and Mongo database.

The Go application is composed of:

1. API server
2. Step execution manager

The API server will handle all incoming requests from the frontend. It will interact with the databases to create the necessary resources and also trigger the step execution manager to execute the automation of service requests.

The Mongo database is used to store the service requests and pipeline information while the Postgres database is used to store the users, organisations, as well as step lifecycle events.

## Authentication

Flowforge uses JWT tokens to authenticate users. The JWT token is generated by Auth0 and is used to authenticate the API requests.

> Changes will need to be made if you want to use a different authentication provider.

TODO: @zzq add info about seeding

## Bruno

Flowforge uses [Bruno](https://www.usebruno.com) as the API test tool. All the files can be found at `flowforge_api_bruno`.

To simplify the process of running each API, there is a pre-script created that will fetch the JWT token from Auth0 to authenticate the API requests. To get this pre-script to work correctly, simply create a `.env` file in the `flowforge_api_bruno` directory with the following content:

- `AUTH0_USERNAME`: username for the Auth0 application
- `AUTH0_PASSWORD`: password for the Auth0 application
- `AUTH0_CLIENT_SECRET`: client secret for the Auth0 application
